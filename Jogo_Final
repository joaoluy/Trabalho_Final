#include <iostream>
#include <stdlib.h>
#include <conio.h>
#include <windows.h>
#include <ctime>
using namespace std;

const int L = 10; // linha
const int C = 5;  // coluna

char modo, objetivo; //variaveis para modo e objetivo
bool validade = false, validadeo = false; //validade do modo e objetivo
char mapa[L][C] ={0}; // matriz do mapa
int N = 1000;
const int pontos[1000] = {0};
char movimento;
int personagem = 2;
int x_asterisco = 0;
int y_asterisco = 0;
bool continua = true;
int treino;
int aux = 10;
int vidas;
int aux2 = 0;
int H = 0;

void comeco();
void obj1();
void obj2();
void MAPA1();
void MAPA2();
void MAPA3();
void MAPA4();
void MAPA5();
void MAPA6();


void MENU(){
    char modo, objetivo;
    bool validade = false, validadeo = false;
    int pontos[N];
    int N = 100000;
    int H = 0;

    for(int i = 0;i<N;i++){
        pontos[i] = i;
    }
    system("clear||cls");
    comeco();
    while(validade == false){
        cout << "digite o modo: " << endl;
        if(_kbhit){
            modo = _getch();
            if(modo == '2'){
                validade = true;
                system("clear||cls");
                cout << "Modo escolhido: Fuga" << endl;
            }else if(modo == '1'){
                validade = true;
                system("clear||cls");
                cout << "Modo escolhido: Classico" << endl;
            }else {
                system("clear||cls");
                cout << "Modo invalido \nselecione novamente" << endl;
                cout << "1. Classico (cata asterisco)" << endl;
                cout << "2. Fuga (foge dos asteriscos)" << endl;
            }
        }
    }
    
    if(modo == '1'){
            obj1();
            while(validadeo == false){
                if(_kbhit){
                    objetivo = _getch();
                    if(objetivo == '1'){
                        system("clear||cls");
                        cout << "Modo de jogo Classico" << endl << "obtejivo 1 selecionado" << endl << "Boa Sorte";
                        Sleep(3000);
                        MAPA1();
                        validadeo = true;
                        break;
                    }else if(objetivo == '2'){
                        system("clear||cls");
                        cout << "Modo de jogo Classico" << endl << "obtejivo 2 selecionado" << endl << "Boa Sorte";
                        Sleep(3000);
                        MAPA2();
                        validadeo == true;
                        break;
                    }else if(objetivo == '3'){
                        system("clear||cls");
                        cout << "Modo de jogo Classico" << endl << "objetivo 3 selecionado" << endl << "Boa Sorte";
                        Sleep(3000);
                        MAPA3();
                        validade == true;
                        break;
                    }else
                        system("clear||cls");
                          cout << "objetivo invalido, selecione novamente" << endl;
                          cout << "1. ganhar 10 pontos" << endl;
                          cout << "2. ganhar 20 pontos" << endl;
                          cout << "3. jogar ate perder" << endl;
                }
            }
        }
        if(modo == '2'){
                    obj2();
            while(validadeo == false){
                cout << "Selecione a dificuldade:" << endl;
                if(_kbhit){
                    objetivo = _getch();
                if(objetivo == '1'){
                    system("clear||cls");
                    cout << "Modo de jogo Fuga" << endl << "Dificuldade: Facil" << endl << "Boa Sorte";
                    Sleep(3000);
                    MAPA4();
                    validadeo = true;
                    break;
                }else if(objetivo == '2'){
                    system("clear||cls");
                    cout << "Modo de jogo Fuga" << endl << "Dificuldade: Medio" << endl << "Boa Sorte";
                    Sleep(3000);
                    MAPA5();
                    validadeo == true;
                    break;
                }else if(objetivo == '3'){
                    system("clear||cls");
                    cout << "Modo de jogo Fuga" << endl << "Dificuldade: Dificil" << endl << "Boa Sorte";
                    Sleep(3000);
                    MAPA6();
                    validade == true;
                    break;
                }else system("clear||cls");
                      cout << "objetivo invalido, selecione novamente" << endl;
                      cout << "1. Facil, (5 vidas)" << endl;
                      cout << "2. Medio, (3 vidas)" << endl;
                      cout << "3. Dificil (1 vida)" << endl;
            }
                }
                }
}

void comeco(){
    cout << "Bem vindo ao CATA ASTERISCO" << endl << endl;
    cout << "Escolha o modo de jogo" << endl;
    cout << "1. Classico  (cata asterisco)" << endl;
    cout << "2. Fuga  (foge dos asteriscos)" << endl;
}

void obj1(){
    cout << "selecione o Objetivo: " << endl;
    cout << "1. ganhar 10 pontos" << endl;
    cout << "2. ganhar 20 pontos" << endl;
    cout << "3. infinito" << endl;
}

void obj2(){
    cout << "selecione a Dificuldade: " << endl;
    cout << "1. Facil (5 vidas)" << endl;
    cout << "2. Medio (3 vidas)" << endl;
    cout << "3. Dificil (1 vida)" << endl;
}

void MAPA1() {
    char mapa[L][C] ={0};
    char movimento;
    int personagem = 2;
    int x_asterisco = 0;
    int y_asterisco = 0;
    int pontos[N];
    int N = 1000;
    int H = 0;

    for(int i = 0;i<N;i++){
        pontos[i] = i;
    }
    x_asterisco = rand() % C;

    while(H != 10) {
        system("clear||cls");
        mapa[L - 1][personagem] = 'U';
        mapa[y_asterisco][x_asterisco] = '*';

        for (int i = 0; i < L; i++) {
            for (int j = 0; j < C; j++) {
                cout << mapa[i][j];
            }
            cout << endl;
        }

        if (_kbhit()) {
            movimento = _getch();
            if (movimento == 'a' && personagem > 0) {
                personagem--;
                if(personagem < 0){
                }else{
                    mapa[L - 1][personagem - 1] = ' ';
                }
                if (movimento == 75 && personagem > 0){
                personagem--;
                }
            } else if (movimento == 'd' && personagem < C - 1) {
                personagem++;
                if(personagem > C-1){
                }else{
                    mapa[L - 1][personagem + 1] = ' ';
                }
                if(movimento == 77 && personagem < C - 1){
                personagem++;
                }
            }
        }

        for(int i = 0; i<5;i++){
            mapa[L - 1][i] = ' ';
        }

        if (y_asterisco < L - 2) {
            mapa[y_asterisco][x_asterisco] = ' ';
            y_asterisco++;
        } else {
            x_asterisco = rand() % C;
            y_asterisco = 0;
        }

        if (mapa[L - 2][personagem ] == '*') {
            mapa[L - 2][personagem] == ' ';
            H++;
        }

        for(int i=0; i <5;i++){
            mapa[L - 2][i] = ' ';
        }

        cout << "Pontos: " << pontos[H] << endl;
        if(aux > 0){
        cout << "Modo treino acaba em:" << aux << endl;
        treino++;
        if(treino == 9){
            treino = 0;
            aux--;
            H = 0;
        }
        }
        Sleep(100);
    }
    system("clear || cls");
    cout << "PARABENS, VOCE COLETOU 10 PONTOS" << endl << "FIM DE JOGO" << endl;
    Sleep(2000);
}
void MAPA2(){
    char mapa[L][C] ={0};
    char movimento;
    int personagem = 2;
    int x_asterisco = 0;
    int y_asterisco = 0;
    int pontos[N];
    int N = 100000;
    int H = 0;

    for(int i = 0;i<N;i++){
        pontos[i] = i;
    }

    x_asterisco = rand() % C;

    while(H != 20) {
        system("clear||cls");
        mapa[L - 1][personagem] = 'U';
        mapa[y_asterisco][x_asterisco] = '*';

        for (int i = 0; i < L; i++) {
            for (int j = 0; j < C; j++) {
                cout << mapa[i][j];
            }
            cout << endl;
        }

        if (_kbhit()) {
            movimento = _getch();
            if (movimento == 'a' && personagem > 0) {
                personagem--;
                if(personagem < 0){
                }else{
                    mapa[L - 1][personagem - 1] = ' ';
                }
                if (movimento == 75 && personagem > 0){
                personagem--;
                }
            } else if (movimento == 'd' && personagem < C - 1) {
                personagem++;
                if(personagem > C-1){
                }else{
                    mapa[L - 1][personagem + 1] = ' ';
                }
                if(movimento == 77 && personagem < C - 1){
                personagem++;
                }
            }
        }

        for(int i = 0; i<5;i++){
            mapa[L - 1][i] = ' ';
        }

        if (y_asterisco < L - 2) {
            mapa[y_asterisco][x_asterisco] = ' ';
            y_asterisco++;
        } else {
            x_asterisco = rand() % C;
            y_asterisco = 0;
        }

        if (mapa[L - 2][personagem ] == '*') {
            mapa[L - 2][personagem] == ' ';
            H++;
        }

        for(int i=0; i <5;i++){
            mapa[L - 2][i] = ' ';
        }

        cout << "Pontos: " << pontos[H] << endl;
        if(aux > 0){
        cout << "Modo treino acaba em:" << aux << endl;
        treino++;
        if(treino == 9){
            treino = 0;
            aux--;
            H = 0;
        }
        }
        Sleep(100);
    }
    system("clear || cls");
    cout << "PARABENS, VOCE COLETOU 20 PONTOS" << endl << "FIM DE JOGO" << endl;
    Sleep(2000);
}
void MAPA3(){
    char mapa[L][C] ={0};
    char movimento;
    int personagem = 2;
    int x_asterisco = 0;
    int y_asterisco = 0;
    bool inf = true;
    int pontos[N];
    int N = 100000;
    int H = 0;

    for(int i = 0;i<N;i++){
        pontos[i] = i;
    }

    x_asterisco = rand() % C;

    while(inf == true) {
        system("clear||cls");
        mapa[L - 1][personagem] = 'U';
        mapa[y_asterisco][x_asterisco] = '*';

        for (int i = 0; i < L; i++) {
            for (int j = 0; j < C; j++) {
                cout << mapa[i][j];
            }
            cout << endl;
        }

        if (_kbhit()) {
            movimento = _getch();
            if (movimento == 'a' && personagem > 0) {
                personagem--;
                if(personagem < 0){
                }else{
                    mapa[L - 1][personagem - 1] = ' ';
                }
                if (movimento == 75 && personagem > 0){
                personagem--;
                }
            } else if (movimento == 'd' && personagem < C - 1) {
                    personagem++;
                    if(personagem > C-1){
                    }else{
                        mapa[L - 1][personagem + 1] = ' ';
                    }
                    if(movimento == 77 && personagem < C - 1){
                    personagem++;
                    }
                } else if(movimento == 'p'){
                    inf = false;
                }
        }

        for(int i = 0; i<5;i++){
            mapa[L - 1][i] = ' ';
        }

        if (y_asterisco < L - 2) {
            mapa[y_asterisco][x_asterisco] = ' ';
            y_asterisco++;
        } else {
            x_asterisco = rand() % C;
            y_asterisco = 0;
        }

        if (mapa[L - 2][personagem ] == '*') {
            mapa[L - 2][personagem] == ' ';
            H++;
        }

        for(int i=0; i <5;i++){
            mapa[L - 2][i] = ' ';
        }

        cout << "Pontos: " << pontos[H] << endl;
        if(aux > 0){
        cout << "Modo treino acaba em:" << aux << endl;
        treino++;
        if(treino == 9){
            treino = 0;
            aux--;
            H = 0;
        }
        }
        cout << endl << "aperte p para parar" << endl;
        Sleep(100);
    }
    system("clear || cls");
    cout << "PARABENS, VOCE COLETOU " << pontos << " PONTOS" << endl << "FIM DE JOGO" << endl;
    Sleep(2000);
}
void MAPA4() {
    char mapa[L][C] ={0};
    int vidas = 5;
    char movimento;
    int personagem = 2;
    int x_asterisco = 0;
    int y_asterisco = 0;
    int N = 100000;
    int pontos[N];
    int H = 0;
    int ponto = 0;

    for(int i = 0;i<N;i++){
        pontos[i] = i;
    }

    x_asterisco = rand() % C;

    while(vidas != 0) {
        system("clear||cls");
        mapa[L - 1][personagem] = '*';
        mapa[y_asterisco][x_asterisco] = 'U';

        for (int i = 0; i < L; i++) {
            for (int j = 0; j < C; j++) {
                cout << mapa[i][j];
            }
            cout << endl;
        }

        if (_kbhit()) {
            movimento = _getch();
            if (movimento == 'a' && personagem > 0) {
                personagem--;
                if(personagem < 0){
                }else{
                    mapa[L - 1][personagem - 1] = ' ';
                }
                if (movimento == 75 && personagem > 0){
                personagem--;
                }
            } else if (movimento == 'd' && personagem < C - 1) {
                personagem++;
                if(personagem > C-1){
                }else{
                    mapa[L - 1][personagem + 1] = ' ';
                }
                if(movimento == 77 && personagem < C - 1){
                personagem++;
                }
            }
        }

        for(int i = 0; i<5;i++){
            mapa[L - 1][i] = ' ';
        }

        if (y_asterisco < L - 2) {
            mapa[y_asterisco][x_asterisco] = ' ';
            y_asterisco++;
        } else {
            x_asterisco = rand() % C;
            y_asterisco = 0;
        }

        if (mapa[L - 2][personagem ] == 'U') {
            mapa[L - 2][personagem] == ' ';
            vidas --;
        }
        if (mapa[L - 2][personagem ] != 'U') {
            mapa[L - 2][personagem] == ' ';
            ponto ++;
        }

        for(int i=0; i <5;i++){
            mapa[L - 2][i] = ' ';
        }

        cout << "Vidas: " << vidas << endl;
        cout << "Pontos: " << aux2 << endl;
        if(aux > 0){
        cout << "Modo treino acaba em:" << aux << endl;
        treino++;
            if(treino == 9){
                treino = 0;
                aux--;
                vidas = 5;
                aux2 = -1;
            }
        }
        if(ponto == 9){
                ponto = 0;
                aux2++;
            }
        Sleep(100);
    }
    system("clear || cls");
    cout << "QUE PENA,VOCE MORREU" << endl << "PONTOS: " << aux2 << endl << "FIM DE JOGO" << endl;
    Sleep(2000);
}
void MAPA5() {
    char mapa[L][C] ={0};
    int vidas = 3;
    char movimento;
    int personagem = 2;
    int x_asterisco = 0;
    int y_asterisco = 0;
    int N = 100000;
    int pontos[N];
    int H = 0;
    int ponto = 0;

    for(int i = 0;i<N;i++){
        pontos[i] = i;
    }

    x_asterisco = rand() % C;

    while(vidas != 0) {
        system("clear||cls");
        mapa[L - 1][personagem] = '*';
        mapa[y_asterisco][x_asterisco] = 'U';

        for (int i = 0; i < L; i++) {
            for (int j = 0; j < C; j++) {
                cout << mapa[i][j];
            }
            cout << endl;
        }

        if (_kbhit()) {
            movimento = _getch();
            if (movimento == 'a' && personagem > 0) {
                personagem--;
                if(personagem < 0){
                }else{
                    mapa[L - 1][personagem - 1] = ' ';
                }
                if (movimento == 75 && personagem > 0){
                personagem--;
                }
            } else if (movimento == 'd' && personagem < C - 1) {
                personagem++;
                if(personagem > C-1){
                }else{
                    mapa[L - 1][personagem + 1] = ' ';
                }
                if(movimento == 77 && personagem < C - 1){
                personagem++;
                }
            }
        }

        for(int i = 0; i<5;i++){
            mapa[L - 1][i] = ' ';
        }

        if (y_asterisco < L - 2) {
            mapa[y_asterisco][x_asterisco] = ' ';
            y_asterisco++;
        } else {
            x_asterisco = rand() % C;
            y_asterisco = 0;
        }

        if (mapa[L - 2][personagem ] == 'U') {
            mapa[L - 2][personagem] == ' ';
            vidas --;
        }
        if (mapa[L - 2][personagem ] != 'U') {
            mapa[L - 2][personagem] == ' ';
            ponto ++;
        }

        for(int i=0; i <5;i++){
            mapa[L - 2][i] = ' ';
        }

        cout << "Vidas: " << vidas << endl;
        cout << "Pontos: " << aux2 << endl;
        if(aux > 0){
        cout << "Modo treino acaba em:" << aux << endl;
        treino++;
            if(treino == 9){
                treino = 0;
                aux--;
                vidas = 3;
                aux2 = -1;
            }
        }
        if(ponto == 9){
                ponto = 0;
                aux2++;
            }
        Sleep(100);
    }
    system("clear || cls");
    cout << "QUE PENA,VOCE MORREU" << endl << "PONTOS: " << aux2 << endl << "FIM DE JOGO" << endl;
    Sleep(2000);
}
void MAPA6() {
    char mapa[L][C] ={0};
    int vidas = 1;
    char movimento;
    int personagem = 2;
    int x_asterisco = 0;
    int y_asterisco = 0;
    int N = 100000;
    int pontos[N];
    int H = 0;
    int ponto = 0;

    for(int i = 0;i<N;i++){
        pontos[i] = i;
    }

    x_asterisco = rand() % C;

    while(vidas != 0) {
        system("clear||cls");
        mapa[L - 1][personagem] = '*';
        mapa[y_asterisco][x_asterisco] = 'U';

        for (int i = 0; i < L; i++) {
            for (int j = 0; j < C; j++) {
                cout << mapa[i][j];
            }
            cout << endl;
        }

        if (_kbhit()) {
            movimento = _getch();
            if (movimento == 'a' && personagem > 0) {
                personagem--;
                if(personagem < 0){
                }else{
                    mapa[L - 1][personagem - 1] = ' ';
                }
                if (movimento == 75 && personagem > 0){
                personagem--;
                }
            } else if (movimento == 'd' && personagem < C - 1) {
                personagem++;
                if(personagem > C-1){
                }else{
                    mapa[L - 1][personagem + 1] = ' ';
                }
                if(movimento == 77 && personagem < C - 1){
                personagem++;
                }
            }
        }

        for(int i = 0; i<5;i++){
            mapa[L - 1][i] = ' ';
        }

        if (y_asterisco < L - 2) {
            mapa[y_asterisco][x_asterisco] = ' ';
            y_asterisco++;
        } else {
            x_asterisco = rand() % C;
            y_asterisco = 0;
        }

        if (mapa[L - 2][personagem ] == 'U') {
            mapa[L - 2][personagem] == ' ';
            vidas --;
        }

        if (mapa[L - 2][personagem ] != 'U') {
            mapa[L - 2][personagem] == ' ';
            ponto ++;
        }

        for(int i=0; i <5;i++){
            mapa[L - 2][i] = ' ';
        }

        cout << "Vidas: " << vidas << endl;
        cout << "Pontos: " << aux2 << endl;
        if(aux > 0){
        cout << "Modo treino acaba em:" << aux << endl;
        treino++;
            if(treino == 9){
                treino = 0;
                aux--;
                vidas = 1;
                aux2 = -1;
            }
        }
        if(ponto == 9){
                ponto = 0;
                aux2++;
            }
        Sleep(100);
    }
    system("clear || cls");
    cout << "QUE PENA,VOCE MORREU" << endl << "PONTOS: " << aux2 << endl << "FIM DE JOGO" << endl;
    Sleep(2000);
}

int main() {
    srand(time(NULL));

    MENU();

}
